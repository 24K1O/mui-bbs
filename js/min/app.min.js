var Constant={hostname:"http://192.168.0.102",defaultPageSize:10,keys:{GLOBAL_ID:"globalid",CLIENT_ID:"clientid",CLIENT_EMAIL:"clientemail",CLIENT_NICKNAME:"clientnickname",CLIENT_HEADURL:"clientheadurl",CLIENT_SIGNINDATE:"clientsignindate",CLIENT_SCORE:"clientscore",CLIENT_ADMIN:"clientadmin",CLIENT_TOKEN:"clienttoken"},regex:{email:/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/},init:function(){},convertToBase64:function(a,c,b){var f=document.createElement("canvas"),d=a.width,e=a.height;d>e?d>c&&(e=Math.round(e*=
c/d),d=c):e>b&&(d=Math.round(d*=b/e),e=b);f.width=d;f.height=e;f.getContext("2d").drawImage(a,0,0,d,e);a=f.toDataURL("image/png",.8);return-1==a.indexOf("data:image/png;base64,")?"":a.replace("data:image/png;base64,","")}},Ajax={url:{version:Constant.hostname+"/version/app/version.json",clientLogin:Constant.hostname+"/pub/client/app/login",clientRegister:Constant.hostname+"/pub/client/app/register",clientSignin:Constant.hostname+"/pub/client/app/signin",clientModifyNickname:Constant.hostname+"/pub/client/app/modifynickname",
clientModifyHeadUrl:Constant.hostname+"/pub/client/app/modifyheadurl",clientModifyPassword:Constant.hostname+"/pub/client/app/modifypassword",clientToken:Constant.hostname+"/pub/client/app/token",topicTypeList:Constant.hostname+"/bbs/topictype/app/list",topicEdit:Constant.hostname+"/bbs/topic/app/edit",topicList:Constant.hostname+"/bbs/topic/app/listByTopicType",topic:Constant.hostname+"/bbs/topic/app/topic",commentEdit:Constant.hostname+"/bbs/comment/app/edit",commentList:Constant.hostname+"/bbs/comment/app/listByTopic",
feedbackEdit:Constant.hostname+"/pub/feedback/app/edit",messageList:Constant.hostname+"/bbs/message/app/list",message:Constant.hostname+"/bbs/message/app/message",messageNotRead:Constant.hostname+"/bbs/message/app/notread",messageRead:Constant.hostname+"/bbs/message/app/read"},timeout:2E4,ajax:function(a,c,b,f,d,e,g){d=d||function(a,b,c){mui.plusReady(function(){plus.nativeUI.closeWaiting();plus.nativeUI.toast(b);Ajax.activeGreyBtn()})};Ajax.disabledPrimaryBtn();mui.plusReady(function(){b.uuid=plus.device.uuid;
mui.ajax(a,{type:c,data:b,dataType:e,success:function(a){a.success?f(a.data):g?g(a.message):(plus.nativeUI.closeWaiting(),plus.nativeUI.toast(a.message));Ajax.activeGreyBtn()},error:d,timeout:Ajax.timeout})})},post:function(a,c,b){Ajax.ajax(a,"POST",c,b,mui.noop(),"json")},get:function(a,c,b){Ajax.ajax(a,"GET",c,b,mui.noop(),"json")},isEmpty:function(a){return null==a||""==a||"null"==a||void 0==a||"undefined"==a},disabledPrimaryBtn:function(){var a=mui(".ajax-waiting")[0];void 0!=a&&(a.setAttribute("disabled",
"disabled"),a.classList.remove("mui-btn-primary"),a.classList.add("mui-btn-grey"))},activeGreyBtn:function(){var a=mui(".ajax-waiting")[0];void 0!=a&&(a.removeAttribute("disabled"),a.classList.remove("mui-btn-grey"),a.classList.add("mui-btn-primary"))}};
Date.prototype.format=function(a){var c={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var b in c)(new RegExp("("+b+")")).test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?c[b]:("00"+c[b]).substr((""+c[b]).length)));return a};
