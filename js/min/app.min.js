var Constant={hostname:"https://bbs-yaolin.rhcloud.com",defaultPageSize:10,keys:{GLOBAL_ID:"globalid",CLIENT_ID:"clientid",CLIENT_EMAIL:"clientemail",CLIENT_NICKNAME:"clientnickname",CLIENT_HEADURL:"clientheadurl",CLIENT_SIGNINDATE:"clientsignindate",CLIENT_SCORE:"clientscore",CLIENT_ADMIN:"clientadmin",CLIENT_TOKEN:"clienttoken"},regex:{email:/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/},init:function(){},convertToBase64JPG:function(a,b,c,e){return Constant.convertToBase64(a,"image/jpg",b,c,e)},convertToBase64PNG:function(a,
b,c,e){return Constant.convertToBase64(a,"image/png",b,c,e)},convertToBase64:function(a,b,c,e,h){var g=new Image;g.src=a;a=document.createElement("canvas");var d=g.width,f=g.height;d>f?d>c&&(f=Math.round(f*=c/d),d=c):f>e&&(d=Math.round(d*=e/f),f=e);a.width=d;a.height=f;a.getContext("2d").drawImage(g,0,0,d,f);b=a.toDataURL(b,h);return"data:,"==b.trim()?"":b.replace("data:image/png;base64,","")}},Ajax={url:{version:Constant.hostname+"/version/app/version.json",clientLogin:Constant.hostname+"/pub/client/app/login",
clientRegister:Constant.hostname+"/pub/client/app/register",clientSignin:Constant.hostname+"/pub/client/app/signin",clientModifyNickname:Constant.hostname+"/pub/client/app/modifynickname",clientModifyHeadUrl:Constant.hostname+"/pub/client/app/modifyheadurl",clientModifyPassword:Constant.hostname+"/pub/client/app/modifypassword",clientToken:Constant.hostname+"/pub/client/app/token",topicTypeList:Constant.hostname+"/bbs/topictype/app/list",topicEdit:Constant.hostname+"/bbs/topic/app/edit",topicList:Constant.hostname+
"/bbs/topic/app/listByTopicType",topic:Constant.hostname+"/bbs/topic/app/topic",commentEdit:Constant.hostname+"/bbs/comment/app/edit",commentList:Constant.hostname+"/bbs/comment/app/listByTopic",feedbackEdit:Constant.hostname+"/pub/feedback/app/edit",messageList:Constant.hostname+"/bbs/message/app/list",message:Constant.hostname+"/bbs/message/app/message",messageNotRead:Constant.hostname+"/bbs/message/app/notread",messageRead:Constant.hostname+"/bbs/message/app/read"},timeout:2E4,ajax:function(a,
b,c,e,h,g,d){h=h||function(a,b,c){mui.plusReady(function(){plus.nativeUI.closeWaiting();plus.nativeUI.toast(b);Ajax.activeGreyBtn()})};Ajax.disabledPrimaryBtn();mui.plusReady(function(){c.uuid=plus.device.uuid;mui.ajax(a,{type:b,data:c,dataType:g,success:function(a){a.success?e(a.data):d?d(a.message):(plus.nativeUI.closeWaiting(),plus.nativeUI.toast(a.message));Ajax.activeGreyBtn()},error:h,timeout:Ajax.timeout})})},post:function(a,b,c){Ajax.ajax(a,"POST",b,c,mui.noop(),"json")},get:function(a,b,
c){Ajax.ajax(a,"GET",b,c,mui.noop(),"json")},isEmpty:function(a){return null==a||""==a||"null"==a||void 0==a||"undefined"==a},disabledPrimaryBtn:function(){var a=mui(".ajax-waiting")[0];void 0!=a&&(a.setAttribute("disabled","disabled"),a.classList.remove("mui-btn-primary"),a.classList.add("mui-btn-grey"))},activeGreyBtn:function(){var a=mui(".ajax-waiting")[0];void 0!=a&&(a.removeAttribute("disabled"),a.classList.remove("mui-btn-grey"),a.classList.add("mui-btn-primary"))}};
Date.prototype.format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)(new RegExp("("+c+")")).test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a};
