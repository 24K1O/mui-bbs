var index={main:null,menu:null,mask:null,show:!1,template:'<li class="mui-table-view-cell mui-media" id="%{id}" title="%{title}" disabled="%{disabled}"><a href="javascript:;"><img class="mui-media-object mui-pull-left" src="%{icon}"><div class="mui-media-body">%{name}<p class="mui-ellipsis">%{remark}</p></div></a></li>',start:function(){index.before();mui.init({swipeBack:!1,beforeback:index.back});mui(".mui-scroll-wrapper").scroll({deceleration:5E-4});index.after()},before:function(){index.mask=mui.createMask(index.close)},
after:function(){index.pReady();index.load();document.querySelector(".mui-icon-bars").addEventListener("tap",index.open);window.addEventListener("dragright",function(a){a.detail.gesture.preventDefault()});window.addEventListener("dragleft",function(a){a.detail.gesture.preventDefault()});window.addEventListener("swiperight",index.open);window.addEventListener("swipeleft",index.doclose);window.addEventListener("menu:swipeleft",index.doclose);mui.menu=function(){index.show?index.doclose():index.open()};
mui.back=function(){}},pReady:function(){mui.plusReady(function(){index.main=plus.webview.currentWebview();setTimeout(function(){index.menu=mui.preload({id:"menu.html",url:"menu.html",styles:{left:0,width:"70%",zindex:9997}})},300)})},open:function(){index.show||(index.notifyMenuNotRead(),index.menu.show("none",0,function(){index.menu.setStyle({left:"0%",transition:{duration:150}})}),index.mask.show(),index.show=!0)},doclose:function(){index.close();index.mask.close()},close:function(){index.show&&
(index.menu.setStyle({left:"-70%",transition:{duration:150}}),setTimeout(function(){index.menu.hide()},200),index.show=!1)},back:function(){if(index.show)return index.doclose(),!1;index.menu.close("none");return!0},load:function(){Ajax.post(Ajax.url.topicTypeList,{},function(a){var c="",b;for(b in a)c+=index.template.replace("%{id}",a[b].id).replace("%{title}",a[b].name).replace("%{disabled}",a[b].forbidInClient).replace("%{icon}",Constant.hostname+a[b].icon).replace("%{name}",a[b].name).replace("%{remark}",
a[b].remark);document.getElementById("topicTypeList").innerHTML=c;mui(".mui-table-view").on("tap",".mui-table-view-cell",index.handle)})},handle:function(){var a=this.getAttribute("id"),c=this.getAttribute("title"),b=this.getAttribute("disabled");mui.openWindow({id:"html/listmain.html",url:"html/listmain.html",extras:{_id:a,_name:c,_forbid:b}})},notifyMenuNotRead:function(){var a=plus.webview.getWebviewById("menu.html");mui.fire(a,"notRead")}};
